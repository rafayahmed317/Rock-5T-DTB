# Rock-5T-DTB:
This repo provides a device tree blob for the Radxa Rock 5T. This is useful when you want to access the additional ethernet port, wifi and bluetooth and possibly other peripherals for the rock 5t when using the 5b plus image from https://joshua-riek.github.io/ubuntu-rockchip-download/ . This is not a valid solution but a handy hack if you don't like or want to compile the linux kernel, u-boot and rootfs yourself. 

# Prerequisites:
1. Rock 5T
2. Ubuntu for the Rock 5B Plus installed on the Rock 5T from this link: https://joshua-riek.github.io/ubuntu-rockchip-download/

# Instructions:
1. Clone the repo:
   ```
   git clone https://github.com/rafayahmed317/Rock-5T-DTB.git
   cd Rock-5T-DTB/
   ```
2. Make the script executable:
   ```
   chmod +x configure.sh
   ```
3. Execute the script with root privileges:
   ```
   sudo ./configure.sh
   ```
# Note:
The script is going to modify the first mention of fdtdir in your /boot/extlinux/extlinux.conf to another value. Ensure that the first label in extlinux.conf is the one you boot from. After the script runs the output should be like the following:
```
## /boot/extlinux/extlinux.conf
##
## IMPORTANT WARNING
##
## The configuration of this file is generated automatically.
## Do not edit this file manually, use: u-boot-update

default l0
menu title U-Boot menu
prompt 1
timeout 20


label l0
        menu label Ubuntu 24.04.2 LTS 6.1.0-1025-rockchip
        linux /boot/vmlinuz-6.1.0-1025-rockchip
        initrd /boot/initrd.img-6.1.0-1025-rockchip
        fdt /lib/firmware/6.1.0-1025-rockchip/device-tree/rockchip/rk3588-rock-5t.dtb

        append root=UUID=[A_UUID_HERE] rootwait rw console=ttyS2,1500000 console=tty1 cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory

label l0r
        menu label Ubuntu 24.04.2 LTS 6.1.0-1025-rockchip (rescue target)
        linux /boot/vmlinuz-6.1.0-1025-rockchip
        initrd /boot/initrd.img-6.1.0-1025-rockchip
        fdtdir /lib/firmware/6.1.0-1025-rockchip/device-tree/
        append root=UUID=[A_UUID_HERE] rootwait rw console=ttyS2,1500000 console=tty1 cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory single
```
If the output is not like the above and the script modified some other label, run the following to restore extlinux.conf:

```
sudo mv /boot/extlinux/extlinux.conf.bak /boot/extlinux/extlinux.conf
```
If things still mess up somehow, you will have to reflash the default image, or maybe interact with u-boot during boot to load the correct fdts. 
